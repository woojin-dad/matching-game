<!doctype html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>ìš°ì§„ì´ì˜ ìŠ¤ë§ˆíŠ¸ ë§¤ì¹­ ê²Œì„</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        body { background: #FEE500; font-family: 'Apple SD Gothic Neo', sans-serif; margin: 0; padding: 0; display: flex; justify-content: center; min-height: 100vh; overflow-y: auto; }
        .container { width: 96%; max-width: 700px; background: white; padding: 12px; border-radius: 24px; box-shadow: 0 15px 35px rgba(0,0,0,0.15); position: relative; display: flex; flex-direction: column; min-height: 100vh; margin: 10px 0 180px 0; height: auto; }
        #statusBar { position: sticky; top: 0; display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; background: #f9fafb; padding: 8px 12px; border-radius: 15px; flex-shrink: 0; height: 54px; z-index: 100; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .status-left { display: flex; align-items: center; gap: 6px; }
        .coin-box { font-weight: 900; color: #3C1E1E; font-size: 1rem; display: flex; align-items: center; gap: 3px; }
        .music-toggle-btn { background: #E5E7EB; border: none; padding: 4px 10px; border-radius: 50px; cursor: pointer; font-size: 0.85rem; box-shadow: 0 2px 0 #9CA3AF; }
        .home-btn { position: absolute; left: 50%; transform: translateX(-50%); background: #3C1E1E; color: white; padding: 6px 18px; border-radius: 50px; font-size: 0.85rem; font-weight: bold; cursor: pointer; box-shadow: 0 3px 0 #000; }
        .status-right { display: flex; align-items: center; gap: 5px; }
        .gauge-bg { width: 90px; height: 16px; background: #e5e7eb; border-radius: 10px; overflow: hidden; border: 1px solid #d1d5db; } 
        #gaugeFill { height: 100%; width: 0%; background: linear-gradient(90deg, #4ADE80, #16A34A); transition: width 0.4s ease-out; }
        .reward-box { font-weight: 900; color: #3C1E1E; font-size: 1.1rem; }
        #mainPage { flex: 1; padding: 10px 5px; }
        .main-title { font-size: 2.2rem; font-weight: 900; color: #3C1E1E; text-shadow: 1px 1px 0 #fff; letter-spacing: -0.05em; }
        .category-title { font-size: 1.3rem; font-weight: 900; margin-bottom: 15px; margin-top: 10px; color: #374151; }
        .mode-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; padding-bottom: 80px; }
        .mode-card { background: #3C1E1E; color: #FEE500; aspect-ratio: 1 / 1; border-radius: 22px; display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: pointer; transition: transform 0.1s; box-shadow: 0 6px 0 #1a0d0d; padding: 10px; text-align: center; position: relative; -webkit-user-select: none; user-select: none; touch-action: manipulation; }
        .mode-card:active { transform: translateY(3px); box-shadow: 0 3px 0 #1a0d0d; }
        .mode-card .title { font-size: 1rem; font-weight: 900; margin-top: 6px; line-height: 1.2; color: #FFFFFF; word-break: keep-all; }
        .done-label { display: flex; align-items: center; justify-content: center; gap: 2px; font-size: 0.65rem; color: #4ADE80; font-weight: 900; margin-top: 6px; background: rgba(74, 222, 128, 0.15); padding: 2px 8px; border-radius: 10px; }
        .perfect-badge { font-size: 0.65rem; color: #FFD700; font-weight: 900; margin-top: 2px; }

        #rewardModal { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 30px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); z-index: 1000; text-align: center; border: 6px solid #4ADE80; width: 85%; max-width: 400px; animation: popUp 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes popUp { from { transform: translate(-50%, -50%) scale(0.5); opacity: 0; } to { transform: translate(-50%, -50%) scale(1); opacity: 1; } }
        #rewardModal h2 { font-size: 2rem; margin-bottom: 10px; color: #16A34A; }
        #rewardModal p { font-size: 1.2rem; font-weight: 900; color: #3C1E1E; margin-bottom: 20px; line-height: 1.4; }
        #rewardModal button { background: #4ADE80; color: white; padding: 10px 40px; border-radius: 50px; font-weight: 900; font-size: 1.1rem; box-shadow: 0 4px 0 #16A34A; }

        #gamePage { flex: 1; display: none; flex-direction: column; min-height: 100%; }
        .game-header { display: flex; justify-content: space-between; align-items: center; padding: 5px; margin-bottom: 10px; }
        #gameTitle { font-size: 1.1rem; font-weight: 900; color: #3C1E1E; }
        #pageIndicator { font-size: 0.85rem; font-weight: 900; background: #3C1E1E; color: #FEE500; padding: 4px 14px; border-radius: 50px; }
        .card { padding: 4px 8px; border-radius: 12px; border: 2.5px solid #e5e7eb; text-align: center; cursor: pointer; font-weight: 900; background: white; display: flex; align-items: center; justify-content: center; height: clamp(40px, 7vh, 70px); width: 100%; box-shadow: 0 4px 0 #f3f4f6; transition: all 0.05s linear; line-height: 1.1; }
        .term-card { background: #3C1E1E; color: #FEE500; border-color: #3C1E1E; box-shadow: 0 4px 0 #1a0d0d; }
        #definitionsColumn .card { border-color: #d1d5db; color: #3C1E1E; box-shadow: 0 4px 0 #cbd5e1; }
        .selected { border-color: #FEE500 !important; z-index: 10; transform: translateY(-2px); box-shadow: 0 4px 0 #FEE500 !important; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-4px); } 75% { transform: translateX(4px); } }
        .wrong-impact { animation: shake 0.2s ease-in-out; border-color: #EF4444 !important; background: #FEF2F2 !important; box-shadow: 0 4px 0 #EF4444 !important; }
        .matched { pointer-events: none; border-color: #FACC15 !important; background: #FEF9C3 !important; opacity: 0.5; transition: all 0.1s; }
    </style>
</head>
<body>
<div id="rewardModal">
    <h2>ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! ğŸ‰</h2>
    <p>ê²Œì´ì§€ë¥¼ ëª¨ë‘ ì±„ì› ì–´ìš”!<br>ğŸ ì„ ë¬¼ 1ê°œì™€<br>ğŸª™ 1,000ì½”ì¸ì„ íšë“!</p>
    <button onclick="closeRewardModal()">ìš°ì™€! ê³ ë§ˆì›Œìš”</button>
</div>

<div class="container">
    <audio id="bgm" loop></audio>
    <audio id="sndClick"><source src="https://assets.mixkit.co/active_storage/sfx/2571/2571-preview.mp3" type="audio/mpeg"></audio>
    <audio id="sndWrong"><source src="https://assets.mixkit.co/active_storage/sfx/2572/2572-preview.mp3" type="audio/mpeg"></audio>
    <audio id="sndMatch1"><source src="https://assets.mixkit.co/active_storage/sfx/2573/2573-preview.mp3" type="audio/mpeg"></audio>
    <audio id="sndMatch2"><source src="https://assets.mixkit.co/active_storage/sfx/2574/2574-preview.mp3" type="audio/mpeg"></audio>
    <audio id="sndMatch3"><source src="https://assets.mixkit.co/active_storage/sfx/2575/2575-preview.mp3" type="audio/mpeg"></audio>
    <audio id="sndMatch4"><source src="https://assets.mixkit.co/active_storage/sfx/2576/2576-preview.mp3" type="audio/mpeg"></audio>
    <audio id="sndMatch5"><source src="https://assets.mixkit.co/active_storage/sfx/2577/2577-preview.mp3" type="audio/mpeg"></audio>

    <div id="statusBar">
        <div class="status-left"><div class="coin-box">ğŸª™ <span id="coinCount">...</span></div><button id="topMusicBtn" class="music-toggle-btn" onclick="toggleBGM()"><span id="musicIcon">ğŸµ</span></button></div>
        <button id="topHomeBtn" onclick="goToMain()" class="home-btn" style="visibility: hidden;">ğŸ  í™ˆ</button>
        <div class="status-right"><span class="bolt-icon">âš¡</span><div class="gauge-bg"><div id="gaugeFill"></div></div><div class="reward-box">ğŸ <span id="giftCount">0</span></div></div>
    </div>
    
    <div id="mainPage">
        <h1 class="text-center my-6 flex items-center justify-center gap-4"><span class="main-title">ğŸ§© ìš°ì§„ì´ì˜ ë§¤ì¹­ ê²Œì„</span><button onclick="location.reload()" class="text-2xl bg-gray-100 p-2 rounded-full active:bg-gray-300">ğŸ”„</button></h1>
        <div class="category-container mb-8"><div class="category-title text-blue-600">ğŸ”„ ë³µìŠµ</div><div id="reviewGrid" class="mode-grid"></div></div>
        <div class="category-container mb-8"><div class="category-title text-green-600">ğŸ“– í•™ìŠµ</div><div id="studyGrid" class="mode-grid"></div></div>
    </div>

    <div id="gamePage">
        <div class="game-header"><h2 id="gameTitle"></h2><div id="pageIndicator"></div></div>
        <div class="game-board-wrapper"><div class="grid grid-cols-2 gap-x-2 gap-y-3 w-full" id="gameGrid"><div id="termsColumn" class="flex flex-col gap-y-3"></div><div id="definitionsColumn" class="flex flex-col gap-y-3"></div></div></div>
    </div>
</div>

<script>
    // âœ… ì•„ë²„ë‹˜ì˜ ìµœì‹  ì›¹ ì•± URL ì ìš©
    const finalScriptUrl = "https://script.google.com/macros/s/AKfycbyWobZtNiP8eFtdxTzk9ZXCOfaIyEZKN_hlAsjMggj6OEM-PXbn7g_YG6y1EJhcWa0Fyg/exec";
    const sheetUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vT3vqts3wY7dCnxbXq1pedePNTOH32_sNnxqAgqx4EIYtaTok3NU-HpwdYOaNIdWFvogYEd6JI1pst1/pub?output=csv";

    let state = { coins: 0, totalMatchedCount: 0, giftCount: 0, maxGauge: 500, selectedTerm: null, selectedDef: null, isPerfect: true };
    let gameData = [], currentIdx = null, currentPage = 0, allCurrentItems = [];
    let wrongDB = JSON.parse(localStorage.getItem('woojin_wrong_v3')) || {};
    let doneDB = JSON.parse(localStorage.getItem('woojin_done_v1')) || {};
    let perfectDB = JSON.parse(localStorage.getItem('woojin_perfect_v1')) || {};

    const playlist = ["https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3", "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3", "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3"];
    const bgm = document.getElementById('bgm');
    bgm.volume = 0.15;
    
    function playRandomBGM() { const track = playlist[Math.floor(Math.random() * playlist.length)]; if(bgm.src !== track) bgm.src = track; bgm.play().catch(() => {}); }
    function toggleBGM() { if (bgm.paused) { if (!bgm.src) playRandomBGM(); else bgm.play(); document.getElementById('musicIcon').innerText = 'ğŸµ'; document.getElementById('topMusicBtn').style.background = "#E5E7EB"; } else { bgm.pause(); document.getElementById('musicIcon').innerText = 'ğŸ”‡'; document.getElementById('topMusicBtn').style.background = "#FCA5A5"; } }
    function playSound(id) { const el = document.getElementById(id); if(el) { el.currentTime = 0; el.play().catch(() => {}); } }
    function playMatchSound() { const idx = (currentPage % 5) + 1; playSound('sndMatch' + idx); }

    function closeRewardModal() { document.getElementById('rewardModal').style.display = 'none'; updateUI(false); }

    function attachLongPress(el, title, type) {
        let pressTimer;
        const start = (e) => { pressTimer = setTimeout(() => { const modeName = (type === 'study' ? 'í•™ìŠµ' : 'ë³µìŠµ'); if (confirm(`âš ï¸ [ê´€ë¦¬ì] ${title}ì˜ ${modeName} ê¸°ë¡ì„ ì´ˆê¸°í™”í• ê¹Œìš”?`)) { 
            if (type === 'study') { delete doneDB[title + "_study"]; delete perfectDB[title + "_study"]; }
            else { delete doneDB[title + "_review"]; delete wrongDB[title]; delete perfectDB[title + "_review"]; }
            localStorage.setItem('woojin_done_v1', JSON.stringify(doneDB)); localStorage.setItem('woojin_wrong_v3', JSON.stringify(wrongDB)); localStorage.setItem('woojin_perfect_v1', JSON.stringify(perfectDB)); renderMenu(); 
        } }, 2000); };
        const cancel = () => clearTimeout(pressTimer);
        el.addEventListener('mousedown', start); el.addEventListener('touchstart', start); el.addEventListener('mouseup', cancel); el.addEventListener('touchend', cancel);
    }

    function shuffle(array) { for (let i = array.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [array[i], array[j]] = [array[j], array[i]]; } return array; }

    function distributeDuplicates(items) {
        const getSound = (str) => str.trim().slice(-1); shuffle(items); const groups = {};
        items.forEach(item => { const s = getSound(item.d); if(!groups[s]) groups[s] = []; groups[s].push(item); });
        const pageCount = Math.ceil(items.length / 10); const distributed = Array.from({ length: pageCount }, () => []);
        Object.values(groups).forEach(group => { group.forEach((item, idx) => { const targetPage = idx % pageCount; distributed[targetPage].push(item); }); });
        distributed.forEach(page => shuffle(page)); return distributed.flat();
    }

    function parseCSV(text) { return text.split('\n').map(row => { let cols = []; let current = ""; let inQuotes = false; for (let i = 0; i < row.length; i++) { if (row[i] === '"') inQuotes = !inQuotes; else if (row[i] === ',' && !inQuotes) { cols.push(current); current = ""; } else current += row[i]; } cols.push(current); return cols; }); }
    
    // âœ… [ìˆ˜ì • ì™„ë£Œ] ë³´ì•ˆ ìš°íšŒìš© JSONP ë°©ì‹ì˜ ë°ì´í„° ë¡œë“œ í•¨ìˆ˜
    async function syncFromCloud() { 
        try { 
            const response = await fetch(finalScriptUrl + "?callback=loadData"); 
            const text = await response.text();
            const jsonStr = text.match(/loadData\((.*)\)/)[1];
            const data = JSON.parse(jsonStr);

            state.coins = Number(data.coins) || 0; 
            state.totalMatchedCount = Number(data.matched) || 0; 
            state.giftCount = Number(data.gifts) || 0; 
            state.maxGauge = (data.maxGauge && Number(data.maxGauge) > 0) ? Number(data.maxGauge) : 500; 
            updateUI(false); 
        } catch (e) { 
            console.error("ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨, ì¼ë°˜ ë°©ì‹ìœ¼ë¡œ ì¬ì‹œë„:", e); 
            try {
                const res = await fetch(finalScriptUrl);
                const data = await res.json();
                state.coins = Number(data.coins) || 0;
                state.totalMatchedCount = Number(data.matched) || 0;
                state.giftCount = Number(data.gifts) || 0;
                state.maxGauge = (data.maxGauge && Number(data.maxGauge) > 0) ? Number(data.maxGauge) : 500;
                updateUI(false);
            } catch(e2) {}
        } 
    }
    
    async function syncToCloud() { 
        try { 
            if (state.totalMatchedCount >= state.maxGauge) { 
                state.giftCount += 1; state.coins += 1000; state.totalMatchedCount = 0; 
                confetti({ particleCount: 200, spread: 90, origin: { y: 0.6 } }); 
                document.getElementById('rewardModal').style.display = 'block';
            } 
            await fetch(finalScriptUrl, { method: 'POST', body: JSON.stringify({ coins: state.coins, matched: state.totalMatchedCount, gifts: state.giftCount }) }); 
        } catch (e) { console.error("ë°ì´í„° ì €ì¥ ì‹¤íŒ¨:", e); } 
    }

    function updateUI(send = true) { 
        document.getElementById('coinCount').innerText = state.coins.toLocaleString(); 
        document.getElementById('giftCount').innerText = state.giftCount; 
        const progress = (state.totalMatchedCount / state.maxGauge) * 100; 
        document.getElementById('gaugeFill').style.width = Math.min(progress, 100) + '%'; 
        if(send) syncToCloud(); 
    }

    function applySmartFontSize(el) { let size = 1.35; el.style.fontSize = size + "rem"; while (el.scrollHeight > el.clientHeight && size > 0.6) { size -= 0.05; el.style.fontSize = size + "rem"; } }
    async function fetchSheetData() { await syncFromCloud(); try { const res = await fetch(`${sheetUrl}&cb=${Date.now()}`); const text = await res.text(); const rows = parseCSV(text).slice(1); gameData = rows.map(row => { if (!row[0] || !row[2]) return null; const items = row[2].split(';').map(i => { const p = i.split('/'); return p.length >= 2 ? { t: p[0].trim(), d: p[1].trim() } : null; }).filter(i => i); return items.length > 0 ? { title: row[0].trim(), icon: (row[1] || "ğŸ“š").trim(), items } : null; }).filter(d => d); renderMenu(); } catch (e) { alert("ë°ì´í„° ë¡œë”© ì‹¤íŒ¨!"); } }

    function renderMenu() {
        const study = document.getElementById('studyGrid'), review = document.getElementById('reviewGrid');
        study.innerHTML = ''; review.innerHTML = '';
        gameData.forEach((mode, idx) => {
            const sKey = mode.title + "_study", sDate = doneDB[sKey], sPerfectCount = perfectDB[sKey] || 0;
            const d = document.createElement('div'); d.className = 'mode-card';
            d.innerHTML = `<div class="text-2xl">${mode.icon}</div><div class="title">${mode.title}</div>
                           ${sPerfectCount > 0 ? `<div class="perfect-badge">ğŸ’¯ ${sPerfectCount}íšŒ</div>` : ''}
                           ${sDate ? `<div class="done-label">v ${sDate}</div>` : ''}`;
            d.onclick = () => { state.isPerfect = true; if(bgm.paused) playRandomBGM(); window.isReviewMode = false; currentIdx = idx; startGame(mode.title, mode.items); };
            attachLongPress(d, mode.title, 'study'); study.appendChild(d);

            const rKey = mode.title + "_review", rItems = wrongDB[mode.title] || [], rDate = doneDB[rKey], rPerfectCount = perfectDB[rKey] || 0;
            const r = document.createElement('div'); r.className = 'mode-card'; r.style.background = "#475569";
            r.innerHTML = `<div class="text-2xl">${mode.icon}</div><div class="title">${mode.title}</div>
                           <div style="font-size:0.6rem; color:white; opacity:0.8;">ì˜¤ë‹µ:${rItems.length}</div>
                           ${rPerfectCount > 0 ? `<div class="perfect-badge">ğŸ’¯ ${rPerfectCount}íšŒ</div>` : ''}
                           ${rDate ? `<div class="done-label">v ${rDate}</div>` : ''}`;
            r.onclick = () => { state.isPerfect = true; if(bgm.paused) playRandomBGM(); if(rItems.length) { window.isReviewMode = true; currentIdx = idx; startGame(mode.title, rItems); } else alert("ì™„ë²½í•´ìš”!"); };
            attachLongPress(r, mode.title, 'review'); review.appendChild(r);
        });
    }

    function startGame(title, items) { document.getElementById('mainPage').style.display = 'none'; document.getElementById('gamePage').style.display = 'flex'; document.getElementById('topHomeBtn').style.visibility = 'visible'; allCurrentItems = distributeDuplicates([...items]); currentPage = 0; renderPage(title); window.scrollTo(0, 0); }
    function renderPage(title) { const totalPages = Math.ceil(allCurrentItems.length / 10); document.getElementById('gameTitle').innerText = (window.isReviewMode ? "ğŸ”„ " : "") + title; document.getElementById('pageIndicator').innerText = `${currentPage + 1} / ${totalPages}`; const pageItems = allCurrentItems.slice(currentPage * 10, (currentPage + 1) * 10); const tCol = document.getElementById('termsColumn'), dCol = document.getElementById('definitionsColumn'); tCol.innerHTML = ''; dCol.innerHTML = ''; shuffle([...pageItems]).forEach(item => { const c = document.createElement('div'); c.className = 'card term-card'; c.innerText = item.t; tCol.appendChild(c); applySmartFontSize(c); c.onclick = () => selectCard(item, 'term', c); }); shuffle([...pageItems]).forEach(item => { const c = document.createElement('div'); c.className = 'card'; c.innerText = item.d; dCol.appendChild(c); applySmartFontSize(c); c.onclick = () => selectCard(item, 'def', c); }); }

    function selectCard(item, type, el) {
        if(el.classList.contains('matched') || el.classList.contains('wrong-impact')) return;
        playSound('sndClick');
        if(type === 'term') { document.querySelectorAll('#termsColumn .card').forEach(c => c.classList.remove('selected')); state.selectedTerm = { item, el }; }
        else { document.querySelectorAll('#definitionsColumn .card').forEach(c => c.classList.remove('selected')); state.selectedDef = { item, el }; }
        el.classList.add('selected');
        if(state.selectedTerm && state.selectedDef) {
            const t = state.selectedTerm, d = state.selectedDef;
            const isMatch = (t.item.t === d.item.t) || (t.item.d.trim().slice(-1) === d.item.d.trim().slice(-1));
            if(isMatch) {
                playMatchSound(); t.el.className = 'card matched'; d.el.className = 'card matched';
                state.coins++; state.totalMatchedCount++; updateUI();
                state.selectedTerm = state.selectedDef = null;
                if(window.isReviewMode && currentIdx !== null) { const title = gameData[currentIdx].title; wrongDB[title] = wrongDB[title].filter(w => w.t !== t.item.t); localStorage.setItem('woojin_wrong_v3', JSON.stringify(wrongDB)); }
                if(document.querySelectorAll('.matched').length === (pageItemsCount() * 2)) {
                    if((currentPage + 1) * 10 < allCurrentItems.length) { currentPage++; setTimeout(() => renderPage(document.getElementById('gameTitle').innerText), 300); }
                    else {
                        const now = new Date(); const dateStr = `${String(now.getMonth() + 1).padStart(2, '0')}/${String(now.getDate()).padStart(2, '0')}`;
                        const key = gameData[currentIdx].title + (window.isReviewMode ? "_review" : "_study");
                        doneDB[key] = dateStr;
                        if(state.isPerfect) { perfectDB[key] = (perfectDB[key] || 0) + 1; localStorage.setItem('woojin_perfect_v1', JSON.stringify(perfectDB)); }
                        localStorage.setItem('woojin_done_v1', JSON.stringify(doneDB));
                        confetti(); setTimeout(() => { goToMain(); }, 1500);
                    }
                }
            } else {
                playSound('sndWrong'); if ("vibrate" in navigator) navigator.vibrate(100);
                t.el.classList.add('wrong-impact'); d.el.classList.add('wrong-impact');
                state.isPerfect = false;
                if(!window.isReviewMode && currentIdx !== null) { const title = gameData[currentIdx].title; wrongDB[title] = wrongDB[title] || []; if(!wrongDB[title].some(w => w.t === t.item.t)) { wrongDB[title].push(t.item); localStorage.setItem('woojin_wrong_v3', JSON.stringify(wrongDB)); } }
                setTimeout(() => { t.el.classList.remove('selected', 'wrong-impact'); d.el.classList.remove('selected', 'wrong-impact'); state.selectedTerm = state.selectedDef = null; }, 250);
            }
        }
    }
    function pageItemsCount() { return allCurrentItems.slice(currentPage * 10, (currentPage + 1) * 10).length; }
    function goToMain() { document.getElementById('mainPage').style.display = 'block'; document.getElementById('gamePage').style.display = 'none'; document.getElementById('topHomeBtn').style.visibility = 'hidden'; renderMenu(); window.scrollTo(0, 0); }
    fetchSheetData();
    document.getElementById('sndClick').volume = 0.05; document.getElementById('sndWrong').volume = 0.05;
    for(let i=1; i<=5; i++) { const el = document.getElementById('sndMatch'+i); if(el) el.volume = 0.07; }
</script>
</body>
</html>